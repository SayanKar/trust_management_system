{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { GridEvents } from '../../../models/events';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { useGridRegisterPipeProcessor } from '../../core/pipeProcessing';\nimport { gridPreferencePanelStateSelector } from './gridPreferencePanelSelector';\nimport { useGridSelector } from '../../utils/useGridSelector';\nexport const preferencePanelStateInitializer = (state, props) => {\n  var _props$initialState$p, _props$initialState;\n\n  return _extends({}, state, {\n    preferencePanel: (_props$initialState$p = (_props$initialState = props.initialState) == null ? void 0 : _props$initialState.preferencePanel) != null ? _props$initialState$p : {\n      open: false\n    }\n  });\n};\n/**\n * TODO: Add a single `setPreferencePanel` method to avoid multiple `setState`\n */\n\nexport const useGridPreferencesPanel = apiRef => {\n  const logger = useGridLogger(apiRef, 'useGridPreferencesPanel');\n  const preferencePanelState = useGridSelector(apiRef, gridPreferencePanelStateSelector);\n  const hideTimeout = React.useRef();\n  const immediateTimeout = React.useRef();\n  /**\n   * API METHODS\n   */\n\n  const hidePreferences = React.useCallback(() => {\n    logger.debug('Hiding Preferences Panel');\n\n    if (preferencePanelState.openedPanelValue) {\n      apiRef.current.publishEvent(GridEvents.preferencePanelClose, {\n        openedPanelValue: preferencePanelState.openedPanelValue\n      });\n    }\n\n    apiRef.current.setState(state => _extends({}, state, {\n      preferencePanel: {\n        open: false\n      }\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef, logger, preferencePanelState.openedPanelValue]); // This is to prevent the preferences from closing when you open a select box or another panel,\n  // The issue is in MUI core V4 => Fixed in V5\n\n  const doNotHidePanel = React.useCallback(() => {\n    immediateTimeout.current = setTimeout(() => clearTimeout(hideTimeout.current), 0);\n  }, []); // This is a hack for the issue with Core V4, by delaying hiding the panel on the clickAwayListener,\n  // we can cancel the action if the trigger element still need the panel...\n\n  const hidePreferencesDelayed = React.useCallback(() => {\n    hideTimeout.current = setTimeout(hidePreferences, 100);\n  }, [hidePreferences]);\n  const showPreferences = React.useCallback(newValue => {\n    logger.debug('Opening Preferences Panel');\n    doNotHidePanel();\n    apiRef.current.setState(state => _extends({}, state, {\n      preferencePanel: _extends({}, state.preferencePanel, {\n        open: true,\n        openedPanelValue: newValue\n      })\n    }));\n    apiRef.current.publishEvent(GridEvents.preferencePanelOpen, {\n      openedPanelValue: newValue\n    });\n    apiRef.current.forceUpdate();\n  }, [logger, doNotHidePanel, apiRef]);\n  useGridApiMethod(apiRef, {\n    showPreferences,\n    hidePreferences: hidePreferencesDelayed\n  }, 'ColumnMenuApi');\n  /**\n   * PRE-PROCESSING\n   */\n\n  const stateExportPreProcessing = React.useCallback(prevState => {\n    const preferencePanelToExport = gridPreferencePanelStateSelector(apiRef.current.state);\n\n    if (!preferencePanelToExport.open && !preferencePanelToExport.openedPanelValue) {\n      return prevState;\n    }\n\n    return _extends({}, prevState, {\n      preferencePanel: preferencePanelToExport\n    });\n  }, [apiRef]);\n  const stateRestorePreProcessing = React.useCallback((params, context) => {\n    const preferencePanel = context.stateToRestore.preferencePanel;\n\n    if (preferencePanel != null) {\n      apiRef.current.setState(state => _extends({}, state, {\n        preferencePanel\n      }));\n    }\n\n    return params;\n  }, [apiRef]);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n  /**\n   * EFFECTS\n   */\n\n  React.useEffect(() => {\n    return () => {\n      clearTimeout(hideTimeout.current);\n      clearTimeout(immediateTimeout.current);\n    };\n  }, []);\n};","map":{"version":3,"names":["_extends","React","GridEvents","useGridApiMethod","useGridLogger","useGridRegisterPipeProcessor","gridPreferencePanelStateSelector","useGridSelector","preferencePanelStateInitializer","state","props","_props$initialState$p","_props$initialState","preferencePanel","initialState","open","useGridPreferencesPanel","apiRef","logger","preferencePanelState","hideTimeout","useRef","immediateTimeout","hidePreferences","useCallback","debug","openedPanelValue","current","publishEvent","preferencePanelClose","setState","forceUpdate","doNotHidePanel","setTimeout","clearTimeout","hidePreferencesDelayed","showPreferences","newValue","preferencePanelOpen","stateExportPreProcessing","prevState","preferencePanelToExport","stateRestorePreProcessing","params","context","stateToRestore","useEffect"],"sources":["/Users/yashkothari/project/blockchain_project/node_modules/@mui/x-data-grid/hooks/features/preferencesPanel/useGridPreferencesPanel.js"],"sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport * as React from 'react';\nimport { GridEvents } from '../../../models/events';\nimport { useGridApiMethod } from '../../utils/useGridApiMethod';\nimport { useGridLogger } from '../../utils/useGridLogger';\nimport { useGridRegisterPipeProcessor } from '../../core/pipeProcessing';\nimport { gridPreferencePanelStateSelector } from './gridPreferencePanelSelector';\nimport { useGridSelector } from '../../utils/useGridSelector';\nexport const preferencePanelStateInitializer = (state, props) => {\n  var _props$initialState$p, _props$initialState;\n\n  return _extends({}, state, {\n    preferencePanel: (_props$initialState$p = (_props$initialState = props.initialState) == null ? void 0 : _props$initialState.preferencePanel) != null ? _props$initialState$p : {\n      open: false\n    }\n  });\n};\n/**\n * TODO: Add a single `setPreferencePanel` method to avoid multiple `setState`\n */\n\nexport const useGridPreferencesPanel = apiRef => {\n  const logger = useGridLogger(apiRef, 'useGridPreferencesPanel');\n  const preferencePanelState = useGridSelector(apiRef, gridPreferencePanelStateSelector);\n  const hideTimeout = React.useRef();\n  const immediateTimeout = React.useRef();\n  /**\n   * API METHODS\n   */\n\n  const hidePreferences = React.useCallback(() => {\n    logger.debug('Hiding Preferences Panel');\n\n    if (preferencePanelState.openedPanelValue) {\n      apiRef.current.publishEvent(GridEvents.preferencePanelClose, {\n        openedPanelValue: preferencePanelState.openedPanelValue\n      });\n    }\n\n    apiRef.current.setState(state => _extends({}, state, {\n      preferencePanel: {\n        open: false\n      }\n    }));\n    apiRef.current.forceUpdate();\n  }, [apiRef, logger, preferencePanelState.openedPanelValue]); // This is to prevent the preferences from closing when you open a select box or another panel,\n  // The issue is in MUI core V4 => Fixed in V5\n\n  const doNotHidePanel = React.useCallback(() => {\n    immediateTimeout.current = setTimeout(() => clearTimeout(hideTimeout.current), 0);\n  }, []); // This is a hack for the issue with Core V4, by delaying hiding the panel on the clickAwayListener,\n  // we can cancel the action if the trigger element still need the panel...\n\n  const hidePreferencesDelayed = React.useCallback(() => {\n    hideTimeout.current = setTimeout(hidePreferences, 100);\n  }, [hidePreferences]);\n  const showPreferences = React.useCallback(newValue => {\n    logger.debug('Opening Preferences Panel');\n    doNotHidePanel();\n    apiRef.current.setState(state => _extends({}, state, {\n      preferencePanel: _extends({}, state.preferencePanel, {\n        open: true,\n        openedPanelValue: newValue\n      })\n    }));\n    apiRef.current.publishEvent(GridEvents.preferencePanelOpen, {\n      openedPanelValue: newValue\n    });\n    apiRef.current.forceUpdate();\n  }, [logger, doNotHidePanel, apiRef]);\n  useGridApiMethod(apiRef, {\n    showPreferences,\n    hidePreferences: hidePreferencesDelayed\n  }, 'ColumnMenuApi');\n  /**\n   * PRE-PROCESSING\n   */\n\n  const stateExportPreProcessing = React.useCallback(prevState => {\n    const preferencePanelToExport = gridPreferencePanelStateSelector(apiRef.current.state);\n\n    if (!preferencePanelToExport.open && !preferencePanelToExport.openedPanelValue) {\n      return prevState;\n    }\n\n    return _extends({}, prevState, {\n      preferencePanel: preferencePanelToExport\n    });\n  }, [apiRef]);\n  const stateRestorePreProcessing = React.useCallback((params, context) => {\n    const preferencePanel = context.stateToRestore.preferencePanel;\n\n    if (preferencePanel != null) {\n      apiRef.current.setState(state => _extends({}, state, {\n        preferencePanel\n      }));\n    }\n\n    return params;\n  }, [apiRef]);\n  useGridRegisterPipeProcessor(apiRef, 'exportState', stateExportPreProcessing);\n  useGridRegisterPipeProcessor(apiRef, 'restoreState', stateRestorePreProcessing);\n  /**\n   * EFFECTS\n   */\n\n  React.useEffect(() => {\n    return () => {\n      clearTimeout(hideTimeout.current);\n      clearTimeout(immediateTimeout.current);\n    };\n  }, []);\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}